@model List<Bill>

@{
	ViewData["Title"] = "Quản lý hóa đơn";
}

<section id="main-content">
	<section class="wrapper">
		<h3><i class="fa fa-angle-right"></i> Hóa đơn</h3>

		<div class="row mt">
			<div class="col-md-12">
				<div class="content-panel">
					<div style="padding: 15px;">
						<div class="row">
							<div class="col-md-4 col-sm-12">
								<h4 style="margin-bottom: 15px;"><i class="fa fa-angle-right"></i> Danh sách</h4>
							</div>
							<div class="col-md-8 col-sm-12 text-right">
								<div class="form-group" style="display: flex; gap: 5px; flex-wrap: wrap;">
									<input type="text" class="form-control" placeholder="Tìm kiếm hóa đơn..." style="flex: 1; min-width: 200px;" />

									<button class="btn btn-primary">
										<i class="fa fa-search"></i> <span class="hidden-xs">Tìm kiếm</span>
									</button>
								</div>
							</div>
						</div>
					</div>

					<hr style="margin: 0;" />

					<div class="table-responsive">
						<table class="table table-hover">
							<thead>
								<tr>
									<th class="text-center">#</th>
									<th>Mã hóa đơn</th>
									<th>Mã khách hàng</th>
									<th>Tổng tiền</th>
									<th class="text-center">Trạng thái</th>
									<th class="text-center">Hành động</th>
								</tr>
							</thead>
							<tbody>
								@if (Model != null && Model.Any()) {
									int index = 1;
									foreach (var bill in Model) {
										<tr>
											<td class="text-center">@index</td>
											<td>@bill.BillId</td>
											<td>@bill.AccountId</td>
											<td><strong>@bill.TotalPrice.ToString("N0") VNĐ</strong></td>

											<td class="text-center">
												@switch (bill.StatusBill) {
													case "Pending":
													<span class="label label-warning label-mini">Chờ xử lý</span>
													break;
													case "Confirmed":
													<span class="label label-info label-mini">Đã xác nhận</span>
													break;
													case "Paid":
													<span class="label label-success label-mini">Đã thanh toán</span>
													break;
													case "Completed":
													<span class="label label-primary label-mini">Đã hoàn thành</span>
													break;
													case "Cancelled":
													<span class="label label-danger label-mini">Đã hủy</span>
													break;
													case "Refunded":
													<span class="label label-default label-mini">Đã hoàn tiền</span>
													break;
												}
											</td>

											<td class="text-center" style="white-space: nowrap;">
												<a asp-area="Admin"
													 asp-controller="Bill"
													 asp-action="Edit"
													 asp-route-id="@bill.BillId"
													 class="btn btn-primary btn-xs">
													<i class="fa fa-pencil"></i> Cập nhật
												</a>

												<a href="javascript:void(0)"
													 class="btn btn-danger btn-xs"
													 onclick="showConfirmDelete(
															 '@bill.BillId',
															 'Hóa đơn #@bill.BillId',
															 '@Url.Action("Delete", "Bill", new { area = "Admin" })'
													 )">
													<i class="fa fa-trash-o"></i> Xóa
												</a>
											</td>
										</tr>
										index++;
									}
								} else {
									<tr>
										<td colspan="6" class="text-center text-muted">
											Không có hóa đơn nào
										</td>
									</tr>
								}
							</tbody>
						</table>
					</div>
				</div><div class="text-center" style="margin-top: 20px;">
					@await Html.PartialAsync("_PaginationPartial")
				</div>
			</div>
		</div>
	</section>
</section>
@await Html.PartialAsync("_ConfirmDeleteModal")